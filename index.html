<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RifqyURL | Masterpiece v8</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { 
            background-color: #020617; 
            color: #f8fafc; 
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-image: 
                radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), 
                radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), 
                radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        .glass-card {
            background: rgba(15, 23, 42, 0.65);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }
        .input-field {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(71, 85, 105, 0.4);
            transition: all 0.3s ease;
        }
        .input-field:focus {
            background: rgba(30, 41, 59, 0.9);
            border-color: #60a5fa;
            box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.15);
        }
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }
        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(37, 99, 235, 0.4);
        }
        .btn-primary:disabled {
            background: #334155;
            color: #94a3b8;
            box-shadow: none;
            cursor: not-allowed;
            transform: none;
        }
        /* Iklan Banner Style */
        .ad-banner {
            background: linear-gradient(45deg, #ec4899, #8b5cf6);
            border: 1px solid rgba(255,255,255,0.2);
            animation: pulse-border 2s infinite;
        }
        @keyframes pulse-border {
            0% { box-shadow: 0 0 0 0 rgba(236, 72, 153, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(236, 72, 153, 0); }
            100% { box-shadow: 0 0 0 0 rgba(236, 72, 153, 0); }
        }
        
        .fade-in { animation: fadeIn 0.5s ease-out forwards; opacity: 0; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="flex flex-col items-center justify-center p-4 min-h-screen relative">

    <div class="fixed top-20 left-10 w-72 h-72 bg-blue-500/10 rounded-full blur-[100px] pointer-events-none"></div>
    <div class="fixed bottom-20 right-10 w-72 h-72 bg-purple-500/10 rounded-full blur-[100px] pointer-events-none"></div>

    <div id="creatorApp" class="w-full max-w-xl glass-card p-8 rounded-3xl relative z-10 fade-in" style="animation-delay: 0.1s;">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-extrabold text-white tracking-tight mb-2">Rifqy<span class="text-blue-500">URL</span></h1>
            <div class="flex justify-center gap-2">
                <span class="px-2 py-0.5 rounded-full bg-blue-500/10 text-blue-400 text-[10px] font-bold border border-blue-500/20">MASTERPIECE v8</span>
                <span class="px-2 py-0.5 rounded-full bg-green-500/10 text-green-400 text-[10px] font-bold border border-green-500/20">PROTECTED</span>
            </div>
        </div>

        <div class="space-y-5">
            <div class="group">
                <label class="block text-[10px] font-bold text-slate-400 mb-1.5 ml-1 uppercase">URL Tujuan (Pisahkan koma untuk Rotator)</label>
                <div class="relative">
                    <i class="fa-solid fa-link absolute left-4 top-4 text-slate-500"></i>
                    <input type="text" id="longUrl" placeholder="https://site1.com, https://site2.com" class="input-field w-full pl-10 pr-4 py-3.5 rounded-xl outline-none text-sm text-white placeholder-slate-600">
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-[10px] font-bold text-slate-400 mb-1.5 ml-1 uppercase">Custom Alias</label>
                    <input type="text" id="customId" placeholder="nama-keren" class="input-field w-full px-4 py-3 rounded-xl outline-none text-sm text-white placeholder-slate-600">
                </div>
                <div>
                    <label class="block text-[10px] font-bold text-slate-400 mb-1.5 ml-1 uppercase">Durasi Link</label>
                    <select id="expiryTime" class="input-field w-full px-4 py-3 rounded-xl outline-none text-sm text-slate-300 cursor-pointer">
                        <option value="86400000">24 Jam</option>
                        <option value="604800000" selected>7 Hari</option>
                        <option value="2592000000">30 Hari</option>
                        <option value="premium">‚ú® Permanen (Premium)</option>
                    </select>
                </div>
            </div>

            <div class="border-t border-slate-700/50 pt-4">
                <button onclick="document.getElementById('advOptions').classList.toggle('hidden')" class="text-xs text-blue-400 font-bold hover:text-blue-300 flex items-center gap-1">
                    <i class="fa-solid fa-gear"></i> Pengaturan Canggih v8
                </button>
                
                <div id="advOptions" class="hidden mt-4 space-y-4 bg-slate-900/40 p-4 rounded-xl border border-slate-700/30">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-[10px] font-bold text-slate-400 mb-1 uppercase">Password (Opsional)</label>
                            <input type="text" id="linkPassword" class="input-field w-full px-3 py-2 rounded-lg text-xs">
                        </div>
                        <div>
                            <label class="block text-[10px] font-bold text-slate-400 mb-1 uppercase">Max Klik (0=Unli)</label>
                            <input type="number" id="maxClicks" placeholder="0" class="input-field w-full px-3 py-2 rounded-lg text-xs">
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-[10px] font-bold text-slate-400 mb-1 uppercase">Timer (Detik)</label>
                            <input type="number" id="timerSec" placeholder="0 (Langsung)" class="input-field w-full px-3 py-2 rounded-lg text-xs">
                        </div>
                        <div>
                            <label class="block text-[10px] font-bold text-slate-400 mb-1 uppercase">Blokir UA/Browser</label>
                            <input type="text" id="uaBlock" placeholder="Contoh: Opera, UC" class="input-field w-full px-3 py-2 rounded-lg text-xs">
                        </div>
                    </div>

                    <div class="flex flex-col gap-2">
                        <div class="flex items-center gap-2">
                            <input type="checkbox" id="isOneTime" class="w-4 h-4 rounded border-slate-600">
                            <label for="isOneTime" class="text-[10px] font-bold text-slate-300">Self-Destruct (Hapus setelah 1x baca)</label>
                        </div>
                        <div class="flex items-center gap-2">
                            <input type="checkbox" id="isCloaked" class="w-4 h-4 rounded border-slate-600">
                            <label for="isCloaked" class="text-[10px] font-bold text-slate-300">Link Cloaking (Sembunyikan URL Asli)</label>
                        </div>
                    </div>

                    <div class="pt-2 border-t border-slate-700/30">
                        <label class="block text-[10px] font-bold text-slate-400 mb-1 uppercase">Negara (Kode ISO)</label>
                        <div class="flex gap-2">
                            <input type="text" id="geoBlock" placeholder="ID, US, SG" class="input-field w-full px-3 py-2 rounded-lg text-xs uppercase">
                            <div class="flex items-center gap-2 whitespace-nowrap">
                                <input type="checkbox" id="isWhitelist" class="w-4 h-4">
                                <label for="isWhitelist" class="text-[10px] font-bold text-slate-300">Whitelist</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <button onclick="shorten()" id="btnShorten" class="btn-primary w-full text-white font-bold py-4 rounded-xl transition-all active:scale-[0.98] flex justify-center items-center gap-2">
                Buat Link Sekarang <i class="fa-solid fa-bolt"></i>
            </button>
        </div>

        <div id="resultArea" class="hidden mt-6 pt-6 border-t border-slate-700/50 fade-in">
            <div class="flex flex-col items-center gap-4">
                <div class="bg-white p-2 rounded-xl shadow-lg">
                    <img id="qrImage" src="" alt="QR" class="w-24 h-24 object-contain">
                </div>
                <div class="w-full flex gap-2 bg-slate-900/80 p-3 rounded-xl border border-slate-700">
                    <p id="shortLink" class="flex-1 text-blue-400 font-mono text-sm truncate flex items-center"></p>
                    <button onclick="copyLink()" class="bg-slate-800 hover:bg-slate-700 text-white text-xs px-4 rounded-lg font-bold transition-colors">Salin</button>
                </div>
            </div>
        </div>
    </div>

    <div id="previewApp" class="hidden w-full max-w-md glass-card p-6 rounded-3xl text-center fade-in">
        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-blue-500/20">
            <i class="fa-solid fa-shield-halved text-2xl text-white"></i>
        </div>
        
        <h2 class="text-2xl font-bold text-white mb-1">Pemeriksaan Keamanan</h2>
        
        <div id="urlDisplayArea" class="mb-4">
            <p class="text-[10px] text-slate-500 uppercase font-bold">Tujuan Link:</p>
            <p id="visibleUrl" class="text-blue-400 text-xs font-mono truncate px-4">Loading...</p>
        </div>

        <a href="https://lynk.id/rifqyapps" target="_blank" class="block mb-6 ad-banner rounded-xl p-4 text-left group hover:scale-[1.02] transition-transform cursor-pointer">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-[10px] font-bold text-white/80 uppercase mb-1">Recommended</p>
                    <h3 class="text-white font-bold text-sm">üî• Kunjungi Lynk.id RifqyApps</h3>
                    <p class="text-white/70 text-xs">Dapatkan aplikasi premium & source code eksklusif.</p>
                </div>
                <i class="fa-solid fa-chevron-right text-white"></i>
            </div>
        </a>

        <div id="dynamicContent" class="mb-4">
            <div id="passArea" class="hidden mb-4">
                <input type="password" id="inputPass" placeholder="Masukkan Password Link" class="input-field w-full px-4 py-3 rounded-xl text-center text-white mb-2">
                <p id="passError" class="text-xs text-red-500 hidden font-bold">Password Salah!</p>
            </div>

            <div class="flex justify-center gap-3 mb-6">
                <button onclick="share('wa')" class="w-8 h-8 rounded-full bg-green-500/20 text-green-500 hover:bg-green-500 hover:text-white transition flex items-center justify-center"><i class="fa-brands fa-whatsapp"></i></button>
                <button onclick="share('fb')" class="w-8 h-8 rounded-full bg-blue-600/20 text-blue-600 hover:bg-blue-600 hover:text-white transition flex items-center justify-center"><i class="fa-brands fa-facebook-f"></i></button>
                <button onclick="share('tw')" class="w-8 h-8 rounded-full bg-sky-400/20 text-sky-400 hover:bg-sky-400 hover:text-white transition flex items-center justify-center"><i class="fa-brands fa-twitter"></i></button>
                <button onclick="share('tg')" class="w-8 h-8 rounded-full bg-blue-400/20 text-blue-400 hover:bg-blue-400 hover:text-white transition flex items-center justify-center"><i class="fa-brands fa-telegram"></i></button>
            </div>
            
            <button onclick="reportLink()" class="text-[10px] text-slate-500 hover:text-red-400 flex items-center justify-center gap-1 w-full mb-4">
                <i class="fa-solid fa-flag"></i> Laporkan Link Ini
            </button>
        </div>

        <button id="btnContinue" class="btn-primary w-full text-white font-bold py-3.5 rounded-xl transition-all shadow-lg flex justify-center items-center gap-2">
            <span id="btnText">Lanjut ke Tujuan</span> <i class="fa-solid fa-arrow-right"></i>
        </button>
    </div>

    <div id="errorApp" class="hidden text-center fade-in">
        <div class="text-6xl mb-4">‚õî</div>
        <h1 id="errorTitle" class="text-3xl font-extrabold text-white mb-2">Akses Ditolak</h1>
        <p id="errorDesc" class="text-slate-400 text-sm mb-8 max-w-xs mx-auto">Link tidak dapat diakses.</p>
        <a href="/" class="px-6 py-3 bg-slate-800 hover:bg-slate-700 text-white rounded-xl font-bold transition-all border border-slate-600">Buat Link Baru</a>
    </div>

    <div id="adminPanel" class="hidden fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div class="w-full max-w-4xl glass-card rounded-2xl h-[80vh] flex flex-col">
            <div class="p-6 border-b border-slate-700/50 flex justify-between items-center">
                <h2 class="text-xl font-bold text-white">Admin Dashboard v8</h2>
                <button onclick="document.getElementById('adminPanel').classList.add('hidden')" class="bg-red-500/20 text-red-400 px-3 py-1 rounded hover:bg-red-500 hover:text-white">Close</button>
            </div>
            <div class="flex-1 overflow-auto p-6" id="adminList">Loading...</div>
        </div>
    </div>

    <div onclick="unlockAdmin()" class="mt-8 text-slate-800 text-[10px] cursor-pointer hover:text-slate-600 select-none">v8.0-masterpiece</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getDatabase, ref, set, get, remove, update, increment } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyChF12-MFH4BMTE9p2HGypUhvFYSDlilbc",
            authDomain: "rifqyurl.firebaseapp.com",
            projectId: "rifqyurl",
            databaseURL: "https://rifqyurl-default-rtdb.asia-southeast1.firebasedatabase.app",
            storageBucket: "rifqyurl.firebasestorage.app",
            messagingSenderId: "772691101649",
            appId: "1:772691101649:web:a856d7e9bea45ba04502f0"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // --- UTILS ---
        async function getIP() { try{const r=await fetch('https://api.ipify.org?format=json');const d=await r.json();return d.ip.replace(/\./g,"_");}catch(e){return "unknown_ip";}}
        async function getGeo() { try{const r=await fetch('https://ipapi.co/json/');const d=await r.json();return d.country_code;}catch(e){return "XX";}}
        function isBot() { return /googlebot|bot|crawler|spider|robot|crawling/i.test(navigator.userAgent); }

        // --- 1. CREATE LINK ---
        window.shorten = async function() {
            const btn = document.getElementById('btnShorten');
            btn.disabled = true; btn.innerHTML = `<i class="fa-solid fa-spinner fa-spin"></i> Processing...`;

            try {
                const longUrl = document.getElementById('longUrl').value.trim();
                const customId = document.getElementById('customId').value.trim().replace(/[^a-zA-Z0-9-_]/g, '');
                const expiry = document.getElementById('expiryTime').value;
                const pass = document.getElementById('linkPassword').value.trim();
                const maxC = document.getElementById('maxClicks').value;
                const timer = document.getElementById('timerSec').value;
                const uaBlock = document.getElementById('uaBlock').value;
                const oneTime = document.getElementById('isOneTime').checked;
                const cloaked = document.getElementById('isCloaked').checked;
                
                // Geo
                const geoList = document.getElementById('geoBlock').value.toUpperCase().split(',').map(c=>c.trim()).filter(c=>c.length===2);
                const isWL = document.getElementById('isWhitelist').checked;

                if(!longUrl) throw new Error("URL Kosong!");
                const urls = longUrl.split(',').map(u=>u.trim()).filter(u=>u.startsWith('http'));
                if(urls.length===0) throw new Error("URL tidak valid!");

                // Logic Limit & Alias check skipped for brevity (Assume same as v7)
                const shortId = customId || Math.random().toString(36).substring(2,8);
                const check = await get(ref(db, 'links/'+shortId));
                if(check.exists()) throw new Error("Alias terpakai!");

                let expiryTime = Date.now() + parseInt(expiry);
                if(expiry==="premium") { if(prompt("Pass Owner:")!=="RifqyQPP28!@") throw new Error("Gagal"); expiryTime=32503680000000; }

                await set(ref(db, 'links/'+shortId), {
                    urls: urls, rotatorIndex: 0, createdAt: Date.now(), expiry: expiryTime,
                    password: pass || null, maxClicks: parseInt(maxC)||0,
                    // New v8 Features
                    timer: parseInt(timer)||0,
                    uaBlock: uaBlock || null,
                    selfDestruct: oneTime,
                    cloaking: cloaked,
                    countries: geoList, whitelistMode: isWL,
                    clicks: 0, isReported: false
                });

                const resLink = window.location.origin + "?id=" + shortId;
                document.getElementById('shortLink').innerText = resLink;
                document.getElementById('qrImage').src = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(resLink)}`;
                document.getElementById('resultArea').classList.remove('hidden');

            } catch(e) { alert(e.message); }
            finally { btn.disabled = false; btn.innerHTML = `Buat Link Sekarang <i class="fa-solid fa-bolt"></i>`; }
        };

        // --- 2. ACCESS LINK ---
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get('id');

        if(id) {
            document.getElementById('creatorApp').style.display = 'none';
            initRedirect();
        }

        async function initRedirect() {
            if(isBot()) return showError("Bot Detected", "Akses bot ditolak.");

            const snap = await get(ref(db, 'links/'+id));
            if(!snap.exists()) return showError("404", "Link tidak ditemukan.");
            
            const data = snap.val();

            // Security Checks
            if(data.isReported) return showError("Reported", "Link berbahaya.");
            if(Date.now() > data.expiry) { await remove(ref(db, 'links/'+id)); return showError("Expired", "Link kadaluarsa."); }
            if(data.maxClicks>0 && data.clicks>=data.maxClicks) return showError("Limit", "Kuota klik habis.");
            
            // UA Blacklist Check (v8)
            if(data.uaBlock) {
                const blockedUA = data.uaBlock.split(',').map(s=>s.trim().toLowerCase());
                const myUA = navigator.userAgent.toLowerCase();
                if(blockedUA.some(b => myUA.includes(b))) return showError("Browser Blocked", "Browser Anda diblokir.");
            }

            // Geo Check (v7 logic)
            if(data.countries && data.countries.length > 0) {
                const geo = await getGeo();
                if(data.whitelistMode && !data.countries.includes(geo)) return showError("Geo Restriction", "Negara tidak diizinkan.");
                if(!data.whitelistMode && data.countries.includes(geo)) return showError("Geo Blocked", "Negara diblokir.");
            }

            // --- RENDER PREVIEW ---
            document.getElementById('previewApp').classList.remove('hidden');
            const btn = document.getElementById('btnContinue');
            const urlDisplay = document.getElementById('visibleUrl');

            // 1. Show URL Logic
            const targetUrl = Array.isArray(data.urls) ? data.urls[0] : data.urls;
            if(data.password) {
                urlDisplay.innerText = "üîí Protected Link (Hidden)";
                document.getElementById('prevTitle').innerText = "Link Terkunci";
                document.getElementById('passArea').classList.remove('hidden');
                btn.innerText = "Buka Kunci & Lanjut";
                btn.onclick = () => {
                    if(document.getElementById('inputPass').value === data.password) startTimerAndRedirect(data);
                    else document.getElementById('passError').classList.remove('hidden');
                };
            } else {
                // Show original URL masked partially for privacy or full
                urlDisplay.innerText = targetUrl.length > 40 ? targetUrl.substring(0, 40) + "..." : targetUrl;
                
                // If Timer exists, start disabled
                if(data.timer > 0) {
                    let count = data.timer;
                    btn.disabled = true;
                    const interval = setInterval(() => {
                        btn.innerHTML = `Tunggu... (${count}s)`;
                        count--;
                        if(count < 0) {
                            clearInterval(interval);
                            btn.disabled = false;
                            btn.innerHTML = `Lanjut ke Tujuan <i class="fa-solid fa-arrow-right"></i>`;
                            btn.onclick = () => processRedirect(data);
                        }
                    }, 1000);
                } else {
                    btn.onclick = () => processRedirect(data);
                }
            }
        }

        function startTimerAndRedirect(data) {
            // Used specifically for Password Protected links to start timer AFTER password
            if(data.timer > 0) {
                document.getElementById('passArea').classList.add('hidden');
                const btn = document.getElementById('btnContinue');
                let count = data.timer;
                btn.disabled = true;
                const interval = setInterval(() => {
                    btn.innerHTML = `Tunggu... (${count}s)`;
                    count--;
                    if(count < 0) {
                        clearInterval(interval);
                        btn.disabled = false;
                        btn.innerHTML = `Lanjut ke Tujuan <i class="fa-solid fa-arrow-right"></i>`;
                        btn.onclick = () => processRedirect(data);
                    }
                }, 1000);
            } else {
                processRedirect(data);
            }
        }

        async function processRedirect(data) {
            const btn = document.getElementById('btnContinue');
            btn.innerHTML = `<i class="fa-solid fa-circle-notch fa-spin"></i> Membuka...`;
            
            // Stats & Rotator
            const updates = {};
            updates['clicks'] = increment(1);
            
            let finalUrl = "";
            if(Array.isArray(data.urls) && data.urls.length > 1) {
                finalUrl = data.urls[data.rotatorIndex];
                updates['rotatorIndex'] = (data.rotatorIndex + 1) % data.urls.length;
            } else {
                finalUrl = Array.isArray(data.urls) ? data.urls[0] : data.urls;
            }

            await update(ref(db, 'links/'+id), updates);

            // Self Destruct (v8)
            if(data.selfDestruct) {
                await remove(ref(db, 'links/'+id));
            }

            // Cloaking (v8)
            if(data.cloaking) {
                document.body.innerHTML = `<style>body,html{margin:0;padding:0;height:100%;overflow:hidden;}</style>
                <iframe src="${finalUrl}" style="border:0;width:100%;height:100%;" allowfullscreen></iframe>`;
            } else {
                window.location.href = finalUrl;
            }
        }

        // Share Bar Logic
        window.share = (p) => {
            const url = encodeURIComponent(window.location.href);
            const txt = encodeURIComponent("Cek link ini: ");
            if(p==='wa') window.open(`https://wa.me/?text=${txt}${url}`);
            if(p==='fb') window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`);
            if(p==='tw') window.open(`https://twitter.com/intent/tweet?url=${url}&text=${txt}`);
            if(p==='tg') window.open(`https://t.me/share/url?url=${url}&text=${txt}`);
        };

        window.reportLink = async () => { if(confirm("Lapor?")) { await update(ref(db,'links/'+id),{isReported:true}); location.reload(); }};
        function showError(t,m) { 
            document.getElementById('previewApp').classList.add('hidden');
            document.getElementById('errorApp').classList.remove('hidden');
            document.getElementById('errorTitle').innerText=t; document.getElementById('errorDesc').innerText=m; 
        }

        // --- ADMIN ---
        let taps=0; window.unlockAdmin=()=>{ if(++taps>=5 && prompt("Admin:")==="RifqyQPP28!@") renderAdmin(); };
        async function renderAdmin() {
            document.getElementById('adminPanel').classList.remove('hidden');
            const snap = await get(ref(db, 'links'));
            let h = "";
            snap.forEach(c => {
                const d = c.val();
                let tags = "";
                if(d.selfDestruct) tags+="üí£ ";
                if(d.cloaking) tags+="üé≠ ";
                if(d.timer>0) tags+=`‚è≥${d.timer}s `;
                if(d.uaBlock) tags+="üö´UA ";
                h += `<div class="bg-slate-800/50 p-3 mb-2 rounded border border-slate-700 text-xs flex justify-between">
                    <div><b class="text-blue-400">${c.key}</b> <span class="text-slate-500">${tags}</span><br>${d.urls}</div>
                    <div class="text-right"><span class="bg-slate-700 px-2 rounded text-white">${d.clicks} Hits</span><br>
                    <button onclick="del('${c.key}')" class="text-red-500 mt-1">Hapus</button></div>
                </div>`;
            });
            document.getElementById('adminList').innerHTML = h || "Kosong";
        }
        window.del = async(k)=>{ if(confirm("Hapus?")) {await remove(ref(db,'links/'+k)); renderAdmin();} };
        window.copyLink = () => { navigator.clipboard.writeText(document.getElementById('shortLink').innerText); alert("Disalin!"); };
    </script>
</body>
</html>
